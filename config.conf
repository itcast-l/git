# =======================================================
# Surge 配置 (动态订阅版 - 优化稳定版)
#
# 最后更新时间: 2025-09-28
# 修正了策略组定义顺序，并将名称替换为英文以提高稳定性
# =======================================================

[General]
loglevel = notify
bypass-system = true
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, e.crashlytics.com, captive.apple.com, ::ffff:0:0:0:0/1, ::ffff:128:0:0:0/1
bypass-tun = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
dns-server = 119.29.29.29, 223.5.5.5

# =======================================================
# 代理服务提供商 (Proxy Provider)
# =======================================================
[Proxy Provider]
MyProvider = {
  type = http,
  # ↓↓↓↓↓↓ 在这里填入您的机场订阅链接 ↓↓↓↓↓↓
  url = "你的机场订阅链接",
  # ↑↑↑↑↑↑ 在这里填入您的机场订阅链接 ↑↑↑↑↑↑
  interval = 3600,
  health-check = {
    enable = true,
    url = http://www.gstatic.com/generate_204,
    interval = 600
  }
}

# =======================================================
# 策略组 (Proxy Group)
# =======================================================
[Proxy Group]
# --- 基础策略 (必须放在最前面) ---
Direct = direct
AdBlock = reject
AppPurify = reject-tinygif

# --- 自动测速与区域分组 ---
Auto = url-test, policy-provider = MyProvider, url = http://www.gstatic.com/generate_204, interval = 300
HK = url-test, include-all-providers = true, include-regex = "(?i)港|HK|Hong Kong", url = http://www.gstatic.com/generate_204, interval = 300
SG = url-test, include-all-providers = true, include-regex = "(?i)新|狮|SG|Singapore", url = http://www.gstatic.com/generate_204, interval = 300
JP = url-test, include-all-providers = true, include-regex = "(?i)日|JP|Japan", url = http://www.gstatic.com/generate_204, interval = 300
US = url-test, include-all-providers = true, include-regex = "(?i)美|US|United States", url = http://www.gstatic.com/generate_204, interval = 300
TW = url-test, include-all-providers = true, include-regex = "(?i)台|TW|Taiwan", url = http://www.gstatic.com/generate_204, interval = 300

# --- 主要手动选择策略 ---
# 你可以在 Surge App 中通过这个策略组手动选择节点
Proxy = select, Auto, HK, SG, JP, US, TW, Direct, policy-provider = MyProvider

# --- 服务导向策略 (根据规则匹配) ---
Final = select, Proxy, Direct
Streaming = select, Proxy, Auto, HK, SG, JP, US, TW
Netflix = select, Proxy, Auto, HK, SG, JP, US, TW
YouTube = select, Proxy, Auto, HK, SG, JP, US, TW
Telegram = select, Proxy, Auto, SG
Apple = select, Direct, Proxy
Microsoft = select, Direct, Proxy
OneDrive = select, Direct, Proxy
Bing = select, Proxy, Direct
GoogleFCM = select, Proxy, Direct
AI = select, Proxy, JP, US
NeteaseMusic = select, Proxy, HK
Game = select, Proxy, Direct
Bilibili = select, Direct, HK, TW
Bahamut = select, HK, TW
Domestic = select, Direct

# =======================================================
# 规则 (Rule)
# =======================================================
[Rule]
# 自定义规则
DOMAIN-SUFFIX,v2ex.com,HK
DOMAIN-SUFFIX,line.xmsl.org,SG
DOMAIN-SUFFIX,misty.cx,SG
# 规则集
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list,AdBlock,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list,AppPurify,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list,GoogleFCM,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list,Bing,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list,OneDrive,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list,Microsoft,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list,Apple,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list,Telegram,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AI.list,AI,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAi.list,AI,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/NetEaseMusic.list,NeteaseMusic,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list,Game,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Origin.list,Game,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list,Game,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list,Game,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list,Game,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list,YouTube,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list,Netflix,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bahamut.list,Bahamut,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list,Bilibili,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list,Bilibili,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list,Domestic,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list,Streaming,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list,Proxy,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,Direct,update-interval=86400
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list,Direct,update-interval=86400
GEOIP,CN,Direct
FINAL,Final

# =======================================================
# 脚本 (Script)
# =======================================================
[Script]
iQIYI.js = script-path=https://raw.githubusercontent.com/NobyDa/Script/master/iQIYI-DailyBonus/iQIYI.js,type=http-request,pattern=https?:\/\/.*\.iqiyi\.com\/.*authcookie=
